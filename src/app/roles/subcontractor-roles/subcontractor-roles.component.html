<ibox-panel [breadcrumbs]="breadcrumbs" >
  <ng-container class="heading">List of Subcontractor Roles</ng-container>
  <ng-container class="heading-aside">
    <div class="text-right">
      <button (click)="onCreateRole()" type="button" class="btn btn-sm btn-success add"> <i class="fa fa-plus"></i> Add New</button>
    </div>
  </ng-container>
  <ng-container class="body">

    <table class="table table-striped ibox-table">
      <thead>
      <tr>
        <th>Role</th>
        <th>Description</th>
        <th class="actions-holder">Actions</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let r of roles">
        <td>{{r.role}}</td>
        <td>{{r.description}}</td>
        <td>
          <button (click)="onEditRole(r)" type="button" class="btn btn-sm btn-primary"> <i class="fa fa-pencil"></i> Edit</button>
          <button (click)="onDeleteRole(r)" type="button" class="btn btn-sm btn-danger"> <i class="fa fa-trash"></i> Delete</button>
        </td>
      </tr>
      </tbody>
    </table>
  </ng-container>
</ibox-panel>

<ng-template #createModal let-close="close">
  <form class="form-horizontal" [formGroup]="createRoleForm" (submit)="createRole()">
    <div class="modal-header">
      <h4 class="modal-title" style="font-size: 1rem;">Create Role</h4>
    </div>
    <div class="modal-body">
      <div class="form-group">
        <label for="name">Role</label>
        <div>
          <input type="text" name="role" formControlName="role" class="form-control">
        </div>
      </div>
      <div class="form-group">
        <label for="notes">Description</label>
        <div>
          <textarea name="description" formControlName="description" id="description" class="form-control"></textarea>
        </div>
      </div>
    </div>
    <div class="modal-footer clearfix">
      <button type="button" class="btn btn-danger btn-sm" (click)="closeCreate()">Cancel</button>
      <button type="submit" class="btn btn-success btn-sm" [disabled]="!createRoleForm.valid">Submit</button>
    </div>
  </form>
</ng-template>

<ng-template #editModal let-close="close">
  <form class="form-horizontal" #updateRoleForm="ngForm" (submit)="updateRole(updateRoleForm)">
    <div class="modal-header">
      <h4 class="modal-title" style="font-size: 1rem;">Edit Role</h4>
    </div>
    <div class="modal-body">
      <div class="form-group">
        <label for="name">Role</label>
        <div>
          <input type="text" name="role" class="form-control" [ngModel]="role.role">
        </div>
      </div>
      <div class="form-group">
        <label for="notes">Description</label>
        <div>
          <textarea name="description" id="description" class="form-control" [ngModel]="role.description"></textarea>
        </div>
      </div>
    </div>
    <div class="modal-footer clearfix">
      <button type="button" class="btn btn-danger btn-sm" (click)="close()">Cancel</button>
      <button type="submit" class="btn btn-success btn-sm">Submit</button>
    </div>
  </form>
</ng-template>

<ng-template #deleteModal let-close="close">
  <form class="form-horizontal" #deleteRoleForm="ngForm" (submit)="deleteRole(deleteRoleForm)">
    <div class="modal-header">
      <h4 class="modal-title">Delete Employee</h4>
    </div>
    <div class="modal-body">
      <p class="alert alert-danger">Are you sure you want to delete this role?</p>
    </div>
    <div class="modal-footer clearfix">
      <button type="button" class="btn btn-danger btn-sm" (click)="closeDelete()">Cancel</button>
      <button type="submit" class="btn btn-success btn-sm">Submit</button>
    </div>
  </form>
</ng-template>
